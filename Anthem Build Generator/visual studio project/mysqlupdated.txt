-- Generated by Oracle SQL Developer Data Modeler 19.1.0.081.0911
--   at:        2019-06-23 12:59:06 CEST
--   site:      Oracle Database 11g
--   type:      Oracle Database 11g



CREATE TABLE AssaultSystem (
    AssaultSystemId   INTEGER NOT NULL,
    Name              VARCHAR(64) NOT NULL,
    Damage            INTEGER NOT NULL,
    Recharge          INTEGER NOT NULL,
    Radius            INTEGER,
    Charges           INTEGER NOT NULL,
    SpecialEffect     VARCHAR(256),
    ClassId     	INTEGER NOT NULL,
    RarityId   INTEGER NOT NULL
);

ALTER TABLE AssaultSystem ADD CONSTRAINT assaultsystem_pk PRIMARY KEY ( AssaultSystemId );

CREATE TABLE Builds (
    BuildId                         INTEGER NOT NULL,
    Name                            VARCHAR(64) NOT NULL,
    AdditionalNotes                 VARCHAR(256),
    AuthorId                        INTEGER NOT NULL,
    Rating                          INTEGER NOT NULL,
    StrikeSystemId		     INTEGER,
    AssaultSystemId   INTEGER,
    SupportSystemId   INTEGER,
    ClassId                   INTEGER
);

ALTER TABLE Builds ADD CONSTRAINT builds_pk PRIMARY KEY ( BuildId );

CREATE TABLE Class (
    ClassId   INTEGER NOT NULL,
    Name      VARCHAR(25) NOT NULL
);

ALTER TABLE Class ADD CONSTRAINT class_pk PRIMARY KEY ( ClassId );

CREATE TABLE ComponentInBuild (
    BuildId           INTEGER NOT NULL,
    ComponentId   INTEGER NOT NULL
);

ALTER TABLE ComponentInBuild ADD CONSTRAINT componentinbuild_pk PRIMARY KEY ( BuildId,
                                                                              ComponentId );

CREATE TABLE Components (
    ComponentId           INTEGER NOT NULL,
    Name                  VARCHAR(64) NOT NULL,
    ShieldReinforcement   INTEGER NOT NULL,
    ArmorReinforcement    INTEGER NOT NULL,
    NormalEffect          VARCHAR(256) NOT NULL,
    SpecialEffect         VARCHAR(256),
    ClassId         INTEGER NOT NULL,
    RarityId       INTEGER NOT NULL
);

ALTER TABLE Components ADD CONSTRAINT components_pk PRIMARY KEY ( ComponentId );

CREATE TABLE Rarity (
    RarityId   INTEGER NOT NULL,
    Name       VARCHAR(25) NOT NULL,
    Power      INTEGER NOT NULL
);

ALTER TABLE Rarity ADD CONSTRAINT rarity_pk PRIMARY KEY ( RarityId );

CREATE TABLE SavedBuilds (
    BuildId   INTEGER NOT NULL,
    UserId     INTEGER NOT NULL
);

ALTER TABLE SavedBuilds ADD CONSTRAINT savedbuilds_pk PRIMARY KEY ( Buildid,
                                                                    Userid );

CREATE TABLE StrikeSystem (
    StrikeSystemId    INTEGER NOT NULL,
    Name              VARCHAR(64) NOT NULL,
    Damage            INTEGER NOT NULL,
    Recharge          INTEGER NOT NULL,
    Radius            INTEGER,
    Charges           INTEGER NOT NULL,
    SpecialEffect     VARCHAR(256),
    ClassId     INTEGER NOT NULL,
    RarityId   INTEGER NOT NULL
);

ALTER TABLE StrikeSystem ADD CONSTRAINT strikesystem_pk PRIMARY KEY ( StrikeSystemId );

CREATE TABLE SupportSystem (
    SupportSystemId   INTEGER NOT NULL,
    Name              VARCHAR(64) NOT NULL,
    Charges           INTEGER NOT NULL,
    Recharge          INTEGER NOT NULL,
    Radius            INTEGER,
    ClassId     INTEGER NOT NULL,
    RarityId   INTEGER NOT NULL
);

ALTER TABLE SupportSystem ADD CONSTRAINT supportsystem_pk PRIMARY KEY ( SupportSystemId );

CREATE TABLE Users (
    UserId        INTEGER NOT NULL,
    Nickname      VARCHAR(25) NOT NULL,
    Email         VARCHAR(50) NOT NULL,
    Login         VARCHAR(25) NOT NULL,
    Password      VARCHAR(100) NOT NULL,
    Salt          VARCHAR(10) NOT NULL,
    Description   VARCHAR(256)
);

ALTER TABLE Users ADD CONSTRAINT users_pk PRIMARY KEY ( UserId );

CREATE TABLE WeaponInBuild (
    Buildid     INTEGER NOT NULL,
    Weaponid   INTEGER NOT NULL
);

ALTER TABLE WeaponInBuild ADD CONSTRAINT weaponinbuild_pk PRIMARY KEY ( BuildId,
                                                                        WeaponId );

CREATE TABLE Weapons (
    WeaponId          INTEGER NOT NULL,
    Name              VARCHAR(64) NOT NULL,
    Damage            INTEGER NOT NULL,
    Rpm               INTEGER NOT NULL,
    Ammo              INTEGER NOT NULL,
    OptimalRange      INTEGER NOT NULL,
    SpecialEffect     VARCHAR(256),
    ClassId     INTEGER NOT NULL,
    RarityId   INTEGER NOT NULL
);

ALTER TABLE Weapons ADD CONSTRAINT weapons_pk PRIMARY KEY ( Weaponid );

ALTER TABLE AssaultSystem
    ADD CONSTRAINT assaultsystem_class_fk FOREIGN KEY ( ClassId )
        REFERENCES Class ( ClassId );

ALTER TABLE AssaultSystem
    ADD CONSTRAINT assaultsystem_rarity_fk FOREIGN KEY ( RarityId )
        REFERENCES Rarity ( RarityId );

ALTER TABLE Builds
    ADD CONSTRAINT builds_assaultsystem_fk FOREIGN KEY ( AssaultSystemId )
        REFERENCES AssaultSystem ( AssaultSystemId );

ALTER TABLE Builds
    ADD CONSTRAINT builds_class_fk FOREIGN KEY ( ClassId )
        REFERENCES Class ( ClassId );

ALTER TABLE Builds
    ADD CONSTRAINT builds_strikesystem_fk FOREIGN KEY ( StrikeSystemId )
        REFERENCES StrikeSystem ( StrikeSystemId );

ALTER TABLE Builds
    ADD CONSTRAINT builds_supportsystem_fk FOREIGN KEY ( SupportSystemId )
        REFERENCES SupportSystem ( SupportSystemId );

ALTER TABLE ComponentInBuild
    ADD CONSTRAINT componentinbuild_builds_fk FOREIGN KEY ( BuildId )
        REFERENCES Builds ( BuildId );

ALTER TABLE ComponentInBuild
    ADD CONSTRAINT componentinbuild_components_fk FOREIGN KEY ( ComponentId )
        REFERENCES Components ( ComponentId );

ALTER TABLE Components
    ADD CONSTRAINT components_class_fk FOREIGN KEY ( ClassId )
        REFERENCES Class ( ClassId );

ALTER TABLE Components
    ADD CONSTRAINT components_rarity_fk FOREIGN KEY ( RarityId )
        REFERENCES Rarity ( RarityId );

ALTER TABLE SavedBuilds
    ADD CONSTRAINT savedbuilds_builds_fk FOREIGN KEY ( BuildId )
        REFERENCES Builds ( BuildId );

ALTER TABLE SavedBuilds
    ADD CONSTRAINT savedbuilds_users_fk FOREIGN KEY ( UserId )
        REFERENCES Users ( UserId );

ALTER TABLE StrikeSystem
    ADD CONSTRAINT strikesystem_class_fk FOREIGN KEY ( ClassId )
        REFERENCES Class ( ClassId );

ALTER TABLE StrikeSystem
    ADD CONSTRAINT strikesystem_rarity_fk FOREIGN KEY ( RarityId )
        REFERENCES Rarity ( RarityId );

ALTER TABLE SupportSystem
    ADD CONSTRAINT supportsystem_class_fk FOREIGN KEY ( ClassId )
        REFERENCES Class ( ClassId );

ALTER TABLE SupportSystem
    ADD CONSTRAINT supportsystem_rarity_fk FOREIGN KEY ( RarityId )
        REFERENCES Rarity ( RarityId );

ALTER TABLE WeaponInBuild
    ADD CONSTRAINT weaponinbuild_builds_fk FOREIGN KEY ( BuildId )
        REFERENCES Builds ( BuildId );

ALTER TABLE WeaponInBuild
    ADD CONSTRAINT weaponinbuild_weapons_fk FOREIGN KEY ( WeaponId )
        REFERENCES Weapons ( WeaponId );

ALTER TABLE Weapons
    ADD CONSTRAINT weapons_class_fk FOREIGN KEY ( ClassId )
        REFERENCES Class ( ClassId );

ALTER TABLE Weapons
    ADD CONSTRAINT weapons_rarity_fk FOREIGN KEY ( RarityId )
        REFERENCES Rarity ( RarityId );



-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                            12
-- CREATE INDEX                             0
-- ALTER TABLE                             32
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          0
-- CREATE MATERIALIZED VIEW                 0
-- CREATE MATERIALIZED VIEW LOG             0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- REDACTION POLICY                         0
-- 
-- ORDS DROP SCHEMA                         0
-- ORDS ENABLE SCHEMA                       0
-- ORDS ENABLE OBJECT                       0
-- 
-- ERRORS                                   0
-- WARNINGS                                 0
